import{withTheme as e}from"styled-components";import{s as t}from"./index-e7dfce8b.js";import{e as n,f as o,g as r,h as i,i as a,j as s,k as l}from"./_rollupPluginBabelHelpers-d3dbb83e.js";import c,{createRef as p,Component as d}from"react";import{t as u}from"./index-a5e960b2.js";import h from"./Box.js";import m from"./Text.js";import"./style-c8057988.js";import f from"./Icon.js";import"./index-5dee7013.js";import"./Spinner.js";import"./_commonjsHelpers-97e6d7b1.js";import"./chroma-e1cfc3fe.js";import v from"./IconButton.js";import g from"./ScrollBox.js";import{createPortal as w}from"react-dom";var b=t.div.withConfig({displayName:"style__StyledOption",componentId:"pw2tgc-0"})(["cursor:pointer;background:",";"],(function(e){var t=e.theme;return e.isTargeted?t.Select.common.secondaryColor:""})),y=function(e){return c.createElement("svg",e,c.createElement("path",{d:"M.23 9.24l5.86 5.92L17.74 3.55 16.7 2.46 6.14 13.02 1.31 8.19.23 9.24z"}))};y.defaultProps={"'data-name'":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18"};var S=function(e){return c.createElement(b,{isTargeted:e.isTargeted,onClick:function(){e.onClick()},onMouseEnter:function(){e.onMouseEnter()},"aria-selected":e.isSelected,"data-testid":e["data-testid"]},c.createElement(h,{padding:u(6,18)},void 0!==e.content&&e.content||c.createElement(h,{padding:u(6,0),alignItems:"center",inline:!0},e.isSelected&&c.createElement(h,{margin:u(0,6,0,0),inline:!0},c.createElement(m,{severity:e.isSelected?"info":void 0},c.createElement(f,{size:"medium",icon:y}))),c.createElement(m,{severity:e.isSelected?"info":void 0},e.label))))},E=t.span.withConfig({displayName:"style__StyledPlaceholder",componentId:"j3pqwz-0"})(["color:",";"],(function(e){return e.theme.Select.disabled.color})),x=t.div.withConfig({displayName:"style__StyledWrapper",componentId:"j3pqwz-1"})(["transition:all .3s;width:100%;outline:none;display:inline-block;position:relative;background:",";border-radius:",";box-shadow:none;z-index:1;&:before{content:'';z-index:-1;border-radius:",";"," border:",";border-bottom:none;background:",";position:absolute;top:",";left:",";right:",";bottom:",";}",""],(function(e){return e.theme.Select.common.backgroundColor}),(function(e){return e.theme.Select.common.borderRadius}),(function(e){return e.theme.Select.common.borderRadius}),(function(e){return e.open?"\n                border-bottom-left-radius: 0;\n                border-bottom-right-radius: 0;\n                ":""}),(function(e){var t=e.theme;return e.open?"solid 1px ".concat(t.Select.wrapper.common.borderColor):"solid 0px ".concat(t.Select.common.secondaryColor)}),(function(e){return e.theme.Select.common.secondaryColor}),(function(e){return e.open?"-".concat(6,"px"):"0"}),(function(e){return e.open?"-".concat(6,"px"):"0"}),(function(e){return e.open?"-".concat(6,"px"):"0"}),(function(e){return e.open?"-".concat(6,"px"):"0"}),(function(e){var t=e.theme,n=e.disabled,o=e.open;return n&&o?"":"&:focus {\n                box-shadow: ".concat(t.Select.wrapper.focus.boxShadow,";\n            }")})),O=t.div.withConfig({displayName:"style__StyledWindow",componentId:"j3pqwz-2"})(["box-sizing:border-box;position:fixed;max-height:240px;top:",";left:",";width:",";padding-top:",";background:",";border:",";border-top:none;border-radius:",";border-top-left-radius:0;border-top-right-radius:0;",";z-index:1000;"],(function(e){var t=e.rect,n=e.inputHeight;return void 0!==t&&void 0!==n?"".concat(t.top+6+n,"px"):""}),(function(e){var t=e.rect;return void 0!==t?"".concat(t.left-6,"px"):""}),(function(e){var t=e.rect;return void 0!==t?"".concat(t.width+6+6,"px"):""}),(function(e){return e.open?"6px":"0"}),(function(e){return e.theme.Select.common.backgroundColor}),(function(e){var t=e.theme;return e.open?"solid 1px ".concat(t.Select.wrapper.common.borderColor):"solid 0px transparent"}),(function(e){return e.theme.Select.common.borderRadius}),(function(e){return e.open?"":"cursor: pointer"})),C=t.div.withConfig({displayName:"style__StyledInput",componentId:"j3pqwz-3"})(["transition:all 0.3s;box-sizing:border-box;width:100%;border:solid 1px ",";background:",";border-radius:",";opacity:",";input{appearance:none;outline:none;border:none;flex-grow:1;color:",";font-size:",";font-family:",";color:",";&::placeholder{color:",";}}"],(function(e){var t=e.theme,n=e.hasFocus,o=e.open;return n&&!o?t.Select.wrapper.focus.borderColor:t.Select.input.borderColor}),(function(e){var t=e.theme;return e.disabled?t.Select.disabled.background:t.Select.input.background}),(function(e){return e.theme.Select.common.borderRadius}),(function(e){return e.disabled?"0.7":"1"}),(function(e){return e.theme.Select.input.color}),(function(e){return e.theme.Select.input.fontSize}),(function(e){return e.theme.Select.input.fontFamily}),(function(e){return e.theme.Select.input.fontFamily}),(function(e){return e.theme.Select.placeholder.color})),k=function(e){return c.createElement("svg",e,c.createElement("defs",null,c.createElement("style",null,".a","{","fill:#333740","}")),c.createElement("title",null,"MOS icons NEW"),c.createElement("path",{className:"a",d:"M12.57 11.52a6.92 6.92 0 0 0 1.59-4.45 7.08 7.08 0 1 0-7.08 7.06 7 7 0 0 0 4.42-1.55L16.93 18 18 16.92zM3.15 11a5.54 5.54 0 0 1 0-7.85 5.55 5.55 0 0 1 7.86 0A5.55 5.55 0 1 1 3.15 11z"}))};k.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18"};var R=function(e){return c.createElement("svg",e,c.createElement("defs",null,c.createElement("style",null,".a","{","fill:#333740","}")),c.createElement("title",null,"MOS icons NEW"),c.createElement("path",{className:"a",d:"M9.95 3.24L6 7.18 2.05 3.24 1 4.29l5 5 5-5-1.05-1.05z"}))};R.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12"};var P=function(e){return c.createElement("svg",e,c.createElement("defs",null,c.createElement("style",null,".a","{","fill:#333740","}")),c.createElement("title",null,"MOS icons NEW"),c.createElement("path",{className:"a",d:"M2.05 8.76L6 4.82l3.95 3.94L11 7.71l-5-5-5 5 1.05 1.05z"}))};P.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12"};var j=e(function(e){function t(e){var n;return r(this,t),n=i(this,a(t).call(this,e)),s(l(n),"inputRef",void 0),s(l(n),"inputWrapperRef",void 0),s(l(n),"wrapperRef",void 0),s(l(n),"windowRef",void 0),s(l(n),"cycleUp",(function(){var e=n.state.optionPointer<n.filterOptions().length-1?n.state.optionPointer+1:0;n.setState({optionPointer:e})})),s(l(n),"cycleTo",(function(e){n.setState({optionPointer:e})})),s(l(n),"cycleDown",(function(){var e=n.state.optionPointer>0?n.state.optionPointer-1:n.filterOptions().length-1;n.setState({optionPointer:e})})),s(l(n),"close",(function(){n.setState({isOpen:!1})})),s(l(n),"open",(function(){n.props.disabled||(n.handleInput(""),n.setState({isOpen:!0}))})),s(l(n),"filterOptions",(function(){return n.props.options.filter((function(e){return-1!==e.label.toLowerCase().indexOf(n.state.input.toLowerCase())}))})),s(l(n),"handleClickOutside",(function(e){null===n.wrapperRef.current||null===n.windowRef.current||n.wrapperRef.current.contains(e.target)||n.windowRef.current.contains(e.target)||n.close()})),s(l(n),"handleChange",(function(e){n.props.onChange(e),n.setState({isOpen:!1,optionPointer:-1})})),s(l(n),"handleChangeEvent",(function(e){n.handleChange(e.target.value)})),s(l(n),"handleInput",(function(e){n.setState({input:e,optionPointer:-1})})),s(l(n),"handleFocus",(function(){n.props.disabled||n.setState({hasFocus:!0})})),s(l(n),"handleBlur",(function(){n.setState({hasFocus:!1})})),s(l(n),"handleKeyPress",(function(e){n.state.isOpen||" "!==e.key&&"ArrowDown"!==e.key&&"ArrowUp"!==e.key||n.open(),n.state.isOpen&&("Escape"===e.key&&n.close(),"ArrowUp"===e.key&&n.cycleDown(),"ArrowDown"===e.key&&n.cycleUp(),"Tab"===e.key&&e.preventDefault()),!n.state.isOpen||"Enter"!==e.key&&" "!==e.key||-1===n.state.optionPointer||n.handleChange(n.filterOptions()[n.state.optionPointer].value)})),n.inputRef=p(),n.inputWrapperRef=p(),n.wrapperRef=p(),n.windowRef=p(),n.state={hasFocus:!1,isOpen:!1,input:e.value,optionPointer:-1,inputHeight:void 0},n}return n(t,d),o(t,[{key:"componentDidUpdate",value:function(e,t){t.isOpen&&this.props.disabled&&this.setState({isOpen:!1}),null!==this.inputRef.current&&!t.isOpen&&this.state.isOpen&&this.inputRef.current.focus();var n=null!==this.inputWrapperRef.current?this.inputWrapperRef.current.getBoundingClientRect().height:0;n!==t.inputHeight&&this.setState({inputHeight:n}),t.isOpen&&!this.state.isOpen&&null!==this.wrapperRef.current&&this.wrapperRef.current.focus()}},{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"render",value:function(){var e=this,t=this.props.options.reduce((function(t,n){return n.value===e.props.value?n:t}),{value:"",label:""});return c.createElement(x,{ref:this.wrapperRef,disabled:this.props.disabled,open:this.state.isOpen,onKeyDownCapture:this.handleKeyPress,onChange:this.handleChangeEvent,onFocus:this.handleFocus,onBlur:this.handleBlur,tabIndex:this.props.disabled?-1:0,role:"combobox","aria-label":"select","aria-expanded":this.state.isOpen,"data-testid":this.props["data-testid"]},c.createElement(C,{open:this.state.isOpen,hasFocus:this.state.hasFocus,disabled:!!this.props.disabled&&this.props.disabled,ref:this.inputWrapperRef,role:"searchbox","aria-autocomplete":"list","aria-controls":this.state.isOpen?"select-window":void 0,"data-testid":this.props["data-testid"]?"".concat(this.props["data-testid"],"-input"):void 0,onClick:this.state.isOpen?void 0:this.open},c.createElement(h,{alignItems:"stretch"},this.state.isOpen&&c.createElement(h,{alignItems:"center",padding:u(6,12),grow:1},c.createElement(h,{alignItems:"center",margin:u(0,6,0,0)},c.createElement(f,{icon:k,size:"small",color:"#d2d7e0"})),c.createElement("input",{ref:this.inputRef,type:"text",placeholder:this.props.placeholder,value:this.state.input,"data-testid":this.props["data-testid"]?"".concat(this.props["data-testid"],"-input-field"):void 0,onChange:function(t){t.stopPropagation(),e.handleInput(t.target.value)}}))||void 0!==this.props.renderSelected&&c.createElement(h,{padding:u(6,12),alignItems:"center",grow:1},this.props.renderSelected(t))||c.createElement(h,{alignItems:"center",padding:u(6,12),grow:1},""!==this.props.value&&c.createElement(m,null,t.label)||c.createElement(m,{severity:"info"},c.createElement(E,{"data-testid":this.props["data-testid"]?"".concat(this.props["data-testid"],"-placeholder"):void 0},this.props.placeholder))),c.createElement(v,{icon:this.state.isOpen?P:R,iconSize:"small",title:this.state.isOpen?"close":"open",onClick:this.state.isOpen?this.close:this.open,disabled:this.props.disabled,variant:"primary"}))),w(c.createElement(O,{id:"select-window",ref:this.windowRef,open:this.state.isOpen,rect:null!==this.wrapperRef.current?this.wrapperRef.current.getBoundingClientRect():void 0,inputHeight:this.state.inputHeight,role:"listbox","data-testid":this.props["data-testid"]?"".concat(this.props["data-testid"],"-window").concat(this.state.isOpen?"-open":"-closed"):void 0},c.createElement(g,{autoHideScrollBar:!1,showInsetShadow:!1},c.createElement("div",{style:{overflow:"hidden",display:this.state.isOpen?"block":"none"}},0===this.filterOptions().length&&c.createElement(h,{padding:u(12,18)},c.createElement(m,null,this.props.emptyText))||this.filterOptions().map((function(t,n){var o={isSelected:t.value===e.props.value},r=n===e.state.optionPointer;return c.createElement(S,{label:t.label,isSelected:o.isSelected,isTargeted:r,key:"".concat(t.value,"-").concat(t.label),onMouseEnter:function(){return e.cycleTo(n)},onClick:function(){e.handleChange(t.value)},"data-testid":e.props["data-testid"]?"".concat(e.props["data-testid"],"-option-").concat(t.value).concat(r?"-targeted":""):void 0,content:void 0!==e.props.renderOption?e.props.renderOption(t,o):void 0})}))))),document.body))}}]),t}());export default j;
