import"styled-components";import{s as e}from"./index-e7dfce8b.js";import{d as t,b as n}from"./_rollupPluginBabelHelpers-d3dbb83e.js";import r,{useRef as o,useState as i,useEffect as a}from"react";import"./_commonjsHelpers-97e6d7b1.js";import"react-is";import"./_react_commonjs-external-e6f2dc1f.js";import c from"./TransitionAnimation.js";import"react-dom";import{M as s,R as d,P as l}from"./index-d64903cf.js";import"./warning-af81d10c.js";var u=e.div.withConfig({displayName:"style__PopoverAnchor",componentId:"sc-1gkber-0"})(["",""],(function(e){return e.stretch?"\n            display: block;\n            flex-grow: 1;\n            height: 100%;\n        ":"\n            display: inline-block;\n        "})),m=e.div.withConfig({displayName:"style__PopoverBackground",componentId:"sc-1gkber-1"})(["position:absolute;left:0;top:0;width:100%;height:100%;z-index:2;box-shadow:0 3px 48px rgba(0,0,0,0.3);background:",";border-radius:",";"],(function(e){return e.theme.Popover.background}),(function(e){return e.theme.Popover.borderRadius})),f=e.div.withConfig({displayName:"style__PopoverContent",componentId:"sc-1gkber-2"})(["position:relative;z-index:4;"]),p=e.div.withConfig({displayName:"style__PopoverWindow",componentId:"sc-1gkber-3"})(["max-width:500px;"]),v=e.div.withConfig({displayName:"style__PopoverArrow",componentId:"sc-1gkber-4"})(["position:absolute;width:16px;height:16px;background:",";"," ",";"],(function(e){return e.theme.Popover.background}),(function(e){switch(e.placement){case"left":case"left-start":case"left-end":return"\n                    right: ".concat(-8,"px;\n                    transform: scaleX(.75) rotate(45deg);\n                ");case"right":case"right-start":case"right-end":return"\n                    left: ".concat(-8,"px;\n                    transform: scaleX(.75) rotate(45deg);\n                ");case"top":case"top-start":case"top-end":return"\n                    bottom: ".concat(-8,"px;\n                    transform: scaleY(.75) rotate(45deg);\n                ");default:return"\n                    top: ".concat(-8,"px;\n                    transform: scaleY(.75) rotate(45deg);\n                ")}}),(function(e){var t=e.theme;return e.shadow?"\n            box-shadow: 0 1px 12px rgba(0 , 0, 0, .2);\n            z-index: 1;\n        ":"\n            background: ".concat(t.Popover.background,";\n            z-index: 3;\n        ")}));export default function(e){var g=o(null),h=o(null),w=i(!!e.show),b=t(w,2),x=b[0],k=b[1],y=function(t){!x||"Escape"!==t.key&&"Esc"!==t.key||void 0===e.triggerOn||k(!x)},E=function(t){g.current&&g.current.contains(t.target)&&void 0!==e.triggerOn&&k(!x)},_=function(t){var n=g.current,r=h.current;null===n||n.contains(t.target)||null===r||r.contains(t.target)||(void 0!==e.onClickOutside&&e.onClickOutside(),void 0!==e.triggerOn&&k(!x))},P=function(e,t){var n=g.current,r=h.current;(null!==n&&n.contains(e.target)||null!==r&&r.contains(e.target))&&k(t)};return a((function(){var t=g.current;if(t&&"hover"===e.triggerOn){var n=function(e){return P(e,!0)},r=function(e){return P(e,!1)};return t.addEventListener("mouseenter",n),t.addEventListener("mouseleave",r),function(){t.removeEventListener("mouseenter",n),t.removeEventListener("mouseleave",r)}}}),[g.current]),a((function(){return document.addEventListener("click"===e.triggerOn?"click":"mouseenter",E),document.addEventListener("mousedown",_),document.addEventListener("keydown",y),function(){document.removeEventListener("click"===e.triggerOn?"click":"mouseenter",E),document.removeEventListener("mousedown",_),document.removeEventListener("keydown",y)}})),r.createElement(s,null,r.createElement(d,null,(function(t){var n=t.ref;return r.createElement("div",{ref:g},r.createElement(u,{ref:n,stretch:e.stretch,role:"button","aria-expanded":void 0!==e.show?e.show:x},e.children))})),r.createElement(c,{show:void 0!==e.show?e.show:x,animation:"fade"},r.createElement("div",{ref:h},r.createElement(l,{positionFixed:!!e.fixed,placement:void 0!==e.placement?e.placement:"bottom",modifiers:{offset:{offset:function(e){switch(!0){case void 0===e.offset&&void 0===e.distance:return"0, 16px";case void 0!==e.offset&&void 0===e.distance:return"".concat(e.offset,"px, 16px");case void 0===e.offset&&void 0!==e.distance:return"0, ".concat(e.distance,"px");default:return"".concat(e.offset,"px, ").concat(e.distance,"px")}}(e)},flip:{enabled:!1},preventOverflow:{enabled:void 0===e.preventOverflow||e.preventOverflow}}},(function(t){var o=t.ref,i=t.style,a=t.placement,c=t.arrowProps;return r.createElement(p,{ref:o,style:i},r.createElement(f,null,e.renderContent()),r.createElement(m,null),r.createElement(v,{ref:c.ref,style:n({},c.style,e.arrowStyle),placement:a}),r.createElement(v,{shadow:!0,style:c.style,placement:a}))})))))}
